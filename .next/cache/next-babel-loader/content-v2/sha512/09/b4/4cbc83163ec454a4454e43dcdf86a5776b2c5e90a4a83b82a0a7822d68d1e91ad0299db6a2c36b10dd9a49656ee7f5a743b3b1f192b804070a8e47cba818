{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState } from \"react\";\nimport FloatingBar from \"../FloatingBar\";\nimport ImageWithLayers from \"../ImageWithLayers\";\nimport Axios from \"axios\";\nimport moment from \"moment\";\nimport { API, RESERVATIONS } from \"../../helper/CONST\";\nimport convertToFormData from \"../../helper/convertToFormData\";\n\nconst NinethMainSection = () => {\n  const {\n    0: info,\n    1: setInfo\n  } = useState({\n    name: \"\",\n    code: \"+966\",\n    phone: \"\",\n    type: \"قص الشعر\",\n    date: \"\",\n    time: \"\"\n  });\n  const {\n    0: loader,\n    1: setLoader\n  } = useState(false);\n\n  const handleChange = (id, value) => {\n    setInfo(_objectSpread(_objectSpread({}, info), {}, {\n      [id]: value\n    }));\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    console.log(info.phone);\n\n    if (!info.name || !info.phone || !info.date) {\n      alert(\"برجاء ملئ جميع البيانات\");\n      return;\n    }\n\n    if (info.phone.length !== 9) {\n      alert(\"برجاء ادخال رقم هاتف صحيح\");\n      return;\n    } // let newPhone = \"+966\" + info.phone;\n    // setInfo({ ...info, phone: newPhone });\n\n\n    let newInfo = _objectSpread(_objectSpread({}, info), {}, {\n      phone: info.code + info.phone\n    });\n\n    console.log(newInfo);\n    setLoader(true);\n\n    try {\n      const res = await Axios({\n        baseURL: API,\n        url: \"/api/reservation/add\",\n        method: \"POST\",\n        data: convertToFormData(newInfo)\n      });\n      setLoader(false);\n      alert(\"لقد تم حجز الموعد\");\n    } catch (error) {\n      console.log(error.response);\n      setLoader(false);\n      if (error.response && error.response.data && error.response.data.msg) alert(error.response.data.msg);else alert(\"فشل حجز الموعد حاول من جديد\");\n    }\n  };\n\n  const handleDate = value => {\n    console.log(value);\n    setInfo(_objectSpread(_objectSpread({}, info), {}, {\n      date: value\n    }));\n  };\n\n  const handleTime = value => {\n    setInfo(_objectSpread(_objectSpread({}, info), {}, {\n      time: value\n    }));\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"w-screen min-h-screen flex relative py-32\",\n    children: [/*#__PURE__*/_jsx(ImageWithLayers, {\n      image: \"/images/image_1.png\",\n      layers: [\"bg-black bg-opacity-90\", \"bg-black bg-opacity-30\"]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"relative text-white flex flex-col flex-grow space-y-20\",\n      children: [/*#__PURE__*/_jsx(FloatingBar, {\n        text: \"\\u0627\\u062D\\u062C\\u0632 \\u0645\\u0648\\u0639\\u062F\",\n        image: \"/images/icon_9.png\"\n      }), /*#__PURE__*/_jsxs(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"flex flex-col items-center justify-center w-full h-full bg-gray-100 bg-opacity-30 space-y-9 py-9\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"flex flex-col text-gray-500 xl:flex-row w-full items-center justify-center space-y-9 xl:space-y-0 xl:space-x-9 xl:space-x-reverse\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"w-10/12 lg:w-8/12 xl:w-2/12\",\n            children: /*#__PURE__*/_jsx(\"input\", {\n              onChange: e => handleChange(\"name\", e.target.value),\n              type: \"text\",\n              placeholder: \"\\u0627\\u062F\\u062E\\u0644 \\u0627\\u0633\\u0645\\u0643\",\n              className: \"p-3 w-full border-gray-500 rounded-lg\"\n            })\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"w-10/12 lg:w-8/12 xl:w-2/12 flex items-center p-3 border-gray-500 rounded-lg bg-white outline-none space-x-2 space-x-reverse\",\n            children: [/*#__PURE__*/_jsx(\"input\", {\n              onChange: e => handleChange(\"phone\", e.target.value),\n              type: \"number\",\n              placeholder: \"\\u0631\\u0642\\u0645 \\u0647\\u0627\\u062A\\u0641\\u0643\",\n              className: \" w-full \",\n              minLength: \"10\"\n            }), /*#__PURE__*/_jsx(\"span\", {\n              className: \"\",\n              children: \"966+\"\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"w-10/12 lg:w-8/12 xl:w-2/12\",\n            children: /*#__PURE__*/_jsxs(\"select\", {\n              className: \"p-3 w-full border-gray-500 rounded-lg\",\n              onChange: e => handleChange(\"type\", e.target.value),\n              children: [/*#__PURE__*/_jsx(\"option\", {\n                value: \"\",\n                children: \"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062E\\u062F\\u0645\\u0647\"\n              }), RESERVATIONS.map(item => /*#__PURE__*/_jsxs(\"option\", {\n                value: item.value,\n                children: [item.value, \" - \", item.price]\n              }, item.id))]\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"w-10/12 lg:w-8/12 xl:w-2/12\",\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"w-full flex space-x-3 space-x-reverse items-center p-3 text-right border-gray-500 rounded-lg text-gray-500 bg-white\",\n              children: [/*#__PURE__*/_jsxs(\"select\", {\n                className: \"flex-shrink-0\",\n                onChange: e => handleTime(e.target.value),\n                children: [/*#__PURE__*/_jsx(\"option\", {\n                  value: \"\",\n                  children: \"\\u0627\\u0644\\u0633\\u0627\\u0639\\u0647\"\n                }), [\"9 Am\", \"10 Am\", \"11 Am\", \"12 Pm\", \"1 Pm\", \"2 Pm\", \"3 Pm\", \"4 Pm\", \"5 Pm\", \"6 Pm\", \"7 Pm\", \"8 Pm\", \"9 Pm\", \"10 Pm\", \"11 Pm\"].map(i => /*#__PURE__*/_jsx(\"option\", {\n                  value: i,\n                  children: i\n                }, i))]\n              }), /*#__PURE__*/_jsx(\"input\", {\n                onChange: e => handleDate(e.target.value),\n                type: \"date\",\n                placeholder: \"\\u0627\\u062F\\u062E\\u0644 \\u0627\\u0644\\u0645\\u064A\\u0639\\u0627\\u062F\",\n                className: \"flex-grow\"\n              })]\n            })\n          })]\n        }), loader ? /*#__PURE__*/_jsx(\"div\", {\n          className: \"animate-ping bg-secondary w-6 h-6 rounded-full\"\n        }) : /*#__PURE__*/_jsx(\"button\", {\n          className: \"p-3 rounded-lg bg-secondary hover:bg-primary w-10/12 lg:w-8/12 xl:w-2/12\",\n          children: \"\\u0627\\u062D\\u062C\\u0632 \\u0645\\u0639\\u0646\\u0627\"\n        })]\n      })]\n    })]\n  });\n};\n\nexport default NinethMainSection;","map":null,"metadata":{},"sourceType":"module"}